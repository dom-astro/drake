<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Équation de Drake Interactive</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .term-card {
            transition: transform 0.2s;
            cursor: pointer;
        }
        .term-card:hover {
            transform: translateY(-5px);
        }
        .equation-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .equation-display:hover {
            transform: scale(1.02);
        }
        .result-display {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .term-detail {
            display: block;
        }
        .active-term {
            border: 3px solid #007bff;
        }
        .value-selector {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        .current-value-display {
            color: white;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
		
		.current-value-optimistic {
			background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
		}
		
		.current-value-pessimistic {
			background: #dc3545;
		}
		
        .term-card-value {
            font-size: 0.8em;
            color: #007bff;
            font-weight: bold;
        }
		
		.display-term {
		    display: inline-block;
			padding-left: 12px;
		}
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar avec les termes -->
            <div class="col-md-4 bg-light p-4">
                <h2 class="text-center mb-4"><i class="fas fa-rocket"></i> Équation de Drake</h2>
                
                <div class="equation-display text-center" onclick="showIntroduction()">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f468-200d-1f680.svg" 
                                 alt="Frank Drake" class="img-fluid rounded-circle" 
                                 style="max-width: 80px; background: white; padding: 10px;">
                            <small class="d-block mt-2">Frank Drake</small>
                        </div>
                        <div class="col-md-9">
                            <h4>N = R* × f<sub>p</sub> × n<sub>e</sub> × f<sub>l</sub> × f<sub>i</sub> × f<sub>c</sub> × L</h4>
                            <small>Nombre de civilisations extraterrestres communicantes</small>
                        </div>
                    </div>
                </div>

                <div class="row" id="terms-grid">
                    <!-- Les cartes des termes seront générées ici -->
                </div>

                <div class="result-display text-center">
                    <h3><i class="fas fa-calculator"></i> Résultat</h3>
                    <h2 id="result-value">?</h2>
                    <p>civilisations communicantes estimées</p>
                    <button class="btn btn-light btn-lg" onclick="calculateResult()">
                        <i class="fas fa-play"></i> Calcul
                    </button>
                </div>
            </div>

            <!-- Zone de détail -->
            <div class="col-md-8 p-4">
                <div id="welcome-screen">
                    <div class="text-center">
                        <h1><i class="fas fa-satellite"></i> L'Équation de Drake</h1>
                        <p class="lead">Explorez les paramètres qui déterminent le nombre de civilisations extraterrestres communicantes dans notre galaxie.</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-8 mx-auto">
                                <div class="card">
                                    <div class="card-header bg-primary text-white">
                                        <h5><i class="fas fa-history"></i> Histoire et Création</h5>
                                    </div>
                                    <div class="card-body text-start">
                                        <p>L'équation fut formulée en 1961 par l'astronome Frank Drake, non pas dans le but de quantifier précisément le nombre de civilisations, mais comme un moyen de stimuler le dialogue scientifique lors de la première réunion scientifique sur la recherche d'intelligence extraterrestre (SETI) à l'Observatoire National de Radioastronomie de Green Bank, Virginie-Occidentale.</p>
                                        
                                        <p>Drake créa cette équation pour faire partie de l'ordre du jour d'une réunion d'experts et elle sert de feuille de route pour l'astrobiologie encore aujourd'hui. En 1961, l'astrophysicien Frank Drake développa cette équation pour estimer le nombre de civilisations avancées susceptibles d'exister dans la galaxie de la Voie lactée.</p>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header bg-success text-white">
                                        <h5><i class="fas fa-lightbulb"></i> Explication et Utilisation</h5>
                                    </div>
                                    <div class="card-body text-start">
                                        <p>L'équation de Drake n'est pas destinée à fournir une réponse définitive, mais plutôt à :</p>
                                        <ul>
                                            <li><strong>Structurer la réflexion</strong> sur les facteurs qui influencent l'existence de la vie intelligente</li>
                                            <li><strong>Identifier les domaines de recherche</strong> prioritaires en astrobiologie</li>
                                            <li><strong>Stimuler le débat scientifique</strong> sur la probabilité de contact extraterrestre</li>
                                            <li><strong>Guider les missions spatiales</strong> dans la recherche de signes de vie</li>
                                        </ul>
                                        
                                        <p>Bien que les valeurs des paramètres soient hautement incertaines, l'équation reste un outil conceptuel fondamental pour comprendre notre place dans l'univers et orienter la recherche SETI.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-info-circle"></i> Cliquez sur un terme à gauche pour commencer votre exploration !
                        </div>
                    </div>
                </div>

                <div id="term-details">
                    <!-- Les détails des termes apparaîtront ici -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Données des termes de l'équation de Drake
        const drakeTerms = {
            'R_star': {
                name: 'R*',
                title: 'Taux de formation stellaire',
                description: 'Le taux moyen de formation d\'étoiles dans notre galaxie',
                details: `
                    <h4><i class="fas fa-star"></i> Taux de formation stellaire (R*)</h4>
                    <p>Ce paramètre représente le nombre d'étoiles qui se forment chaque année dans la Voie lactée.</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Observations actuelles :</strong> Les télescopes spatiaux comme Hipparcos et Gaïa ont permis d'estimer ce taux</li>
                        <li><strong>Modèle mis en oeuvre :</strong> Le modèle de Besançon fait référence quand à la formation et l'évolution d'une galaxie</li>
                        <li><strong>Méthodes de mesure :</strong> Comptage des étoiles jeunes, analyse de la lumière infrarouge des régions de formation stellaire</li>
                        <li><strong>Évolution temporelle :</strong> Le taux était plus élevé dans le passé de la galaxie</li>
                        <li><strong>Variations régionales :</strong> Plus intense dans les bras spiraux et le centre galactique</li>
                    </ul>
                    
                    <h5>Facteurs influençant ce paramètre :</h5>
                    <p>La disponibilité du gaz interstellaire, les ondes de densité dans les bras spiraux, les interactions galactiques, et l'évolution chimique de la galaxie.</p>
                `,
                pessimistic: 1,
                optimistic: 10,
                unit: 'étoiles/an'
            },
            'f_p': {
                name: 'fp',
                title: 'Fraction d\'étoiles avec planètes',
                description: 'La fraction d\'étoiles qui possèdent des systèmes planétaires',
                details: `
                    <h4><i class="fas fa-globe"></i> Fraction d'étoiles avec planètes (fp)</h4>
                    <p>Quelle proportion d'étoiles possède des planètes en orbite ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Télescopes spatiaux :</strong> Les télescopes spatiaux tels que Corot, Kepler et bientôt l'observatoire des mondes habitables ont révolutionné la chasse aux exoplanètes</li>
                        <li><strong>Statistiques actuelles :</strong> Plus de 90% des étoiles semblables au Soleil ont des planètes</li>
                        <li><strong>Diversité des systèmes :</strong> Jupiter chauds, super-Terres, systèmes compacts</li>
                        <li><strong>Méthodes de détection :</strong> Transits, vitesses radiales, microlentilles gravitationnelles</li>
                    </ul>
                    
                    <h5>Découvertes récentes :</h5>
                    <p>Les planètes sont extrêmement communes. Presque toutes les étoiles ont au moins une planète, mais la question est de savoir combien ont des planètes habitables.</p>
                `,
                pessimistic: 0.2,
                optimistic: 1.0,
                unit: 'étoile'
            },
            'n_e': {
                name: 'ne',
                title: 'Planètes habitables par système',
                description: 'Le nombre moyen de planètes par système stellaire qui pourraient abriter la vie',
                details: `
                    <h4><i class="fas fa-leaf"></i> Planètes habitables par système (ne)</h4>
                    <p>Combien de planètes par système stellaire se trouvent dans la "zone habitable" ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Zone Boucles d'or :</strong> Distance optimale où l'eau liquide peut exister</li>
                        <li><strong>Facteurs complexes :</strong> Atmosphère, effet de serre, activité tectonique</li>
                        <li><strong>Exemples prometteurs :</strong> Kepler-452b, Proxima Centauri b, TRAPPIST-1</li>
                        <li><strong>Habitabilité élargie :</strong> Lunes de géantes gazeuses, océans sous-glaciaires</li>
                    </ul>
                    
                    <h5>Complexité de l'habitabilité :</h5>
                    <p>L'habitabilité dépend de nombreux facteurs : type d'étoile, composition atmosphérique, présence d'un champ magnétique, stabilité orbitale, et interactions gravitationnelles.</p>
                `,
                pessimistic: 0.01,
                optimistic: 2.0,
                unit: 'planètes'
            },
            'f_l': {
                name: 'fl',
                title: 'Fraction avec vie',
                description: 'La fraction de planètes habitables où la vie apparaît effectivement',
                details: `
                    <h4><i class="fas fa-dna"></i> Fraction avec vie (fl)</h4>
                    <p>Sur les planètes habitables, quelle proportion développe réellement la vie ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Origine de la vie :</strong> Encore largement mystérieuse malgré les progrès</li>
                        <li><strong>Expériences de laboratoire :</strong> Synthèse de molécules organiques complexes (expérience de Mildred)</li>
                        <li><strong>Environnements extrêmes :</strong> Vie dans des conditions extrêmes sur Terre</li>
                        <li><strong>Signatures biologiques :</strong> Recherche de biosignatures dans les atmosphères</li>
                        <li><strong>Premiers indices :</strong> En utilisant la méthode des transits, on arrive à ectraire la signature de l'atmosphère de certaines exoplanètes</li>
                    </ul>
                    
                    <h5>Hypothèses scientifiques :</h5>
                    <p>Certains pensent que la vie émerge facilement (principe de médiocrité), d'autres considèrent qu'elle est exceptionnellement rare (hypothèse de la Terre rare).</p>
                `,
                pessimistic: 0.001,
                optimistic: 1.0,
                unit: ''
            },
            'f_i': {
                name: 'fi',
                title: 'Fraction avec intelligence',
                description: 'La fraction de planètes avec vie qui développent une vie intelligente',
                details: `
                    <h4><i class="fas fa-brain"></i> Fraction avec intelligence (fi)</h4>
                    <p>Parmi les planètes avec vie, combien développent une intelligence complexe ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Évolution de l'intelligence :</strong> Processus long et complexe sur Terre</li>
                        <li><strong>Convergence évolutive :</strong> L'intelligence a évolué plusieurs fois indépendamment</li>
                        <li><strong>Facteurs environnementaux :</strong> Climat, géographie, extinctions de masse</li>
                        <li><strong>Définition de l'intelligence :</strong> Capacité de manipulation d'outils, communication complexe</li>
                    </ul>
                    
                    <h5>Débats scientifiques :</h5>
                    <p>L'intelligence est-elle un aboutissement inévitable de l'évolution ou un accident statistique ? Les extinctions de masse favorisent-elles ou entravent-elles l'émergence de l'intelligence ?</p>
                `,
                pessimistic: 0.001,
                optimistic: 0.5,
                unit: ''
            },
            'f_c': {
                name: 'fc',
                title: 'Fraction communicante',
                description: 'La fraction de civilisations intelligentes qui développent des technologies de communication',
                details: `
                    <h4><i class="fas fa-satellite-dish"></i> Fraction communicante (fc)</h4>
                    <p>Quelle proportion de civilisations intelligentes développe des technologies radio ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Développement technologique :</strong> Sur Terre, rapide développement au 20ème siècle</li>
                        <li><strong>Motivation à communiquer :</strong> Curiosité scientifique, désir de contact</li>
                        <li><strong>Contraintes techniques :</strong> Ressources, stabilité sociale, priorités civilisationnelles</li>
                        <li><strong>Fenêtre technologique :</strong> Durée pendant laquelle une civilisation émet des signaux détectables</li>
                    </ul>
                    
                    <h5>Considérations modernes :</h5>
                    <p>Les civilisations avancées pourraient utiliser des technologies de communication que nous ne pouvons pas détecter. L'évolution vers des communications plus efficaces pourrait les rendre "silencieuses" pour nous.</p>
                `,
                pessimistic: 0.01,
                optimistic: 1.0,
                unit: ''
            },
            'L': {
                name: 'L',
                title: 'Durée de vie communicante',
                description: 'La durée pendant laquelle une civilisation émet des signaux détectables',
                details: `
                    <h4><i class="fas fa-hourglass-half"></i> Durée de vie communicante (L)</h4>
                    <p>Combien de temps une civilisation reste-t-elle détectable par ses émissions ?</p>
                    
                    <h5>État de l'art des connaissances :</h5>
                    <ul>
                        <li><strong>Exemple terrestre :</strong> Environ 100 ans d'émissions radio intenses</li>
                        <li><strong>Facteurs de survie :</strong> Guerres, catastrophes naturelles, changement climatique</li>
                        <li><strong>Évolution technologique :</strong> Passage à des communications plus directionnelles</li>
                        <li><strong>Filtre de survie :</strong> Capacité à surmonter les crises existentielles</li>
                    </ul>
                    
                    <h5>Scénarios possibles :</h5>
                    <p>Auto-destruction rapide, évolution vers des technologies indétectables, expansion interstellaire, ou survie très longue avec émissions continues. Ce paramètre est probablement le plus incertain de tous.</p>
                `,
                pessimistic: 100,
                optimistic: 1000000,
                unit: 'années'
            }
        };

        let currentValues = {};

        // Initialisation
        $(document).ready(function() {
            initializeValues();
            generateTermCards();
        });

        function generateTermCards() {
            const grid = $('#terms-grid');
            grid.empty();
            
            Object.keys(drakeTerms).forEach(termId => {
                const term = drakeTerms[termId];
                const card = `
                    <div class="col-12 mb-3">
                        <div class="card term-card h-100" onclick="showTermDetail('${termId}')">
                            <div class="card-body text-center">
                                <h6 class="card-title">${term.name}</h6>
                                <small class="text-muted">${term.title}</small>
                                <div class="term-card-value mt-2">
                                    <div class="text-danger small display-term">
                                        <i class="fas fa-frown"></i> ${term.pessimistic} ${term.unit}
                                    </div>
                                    <div class="text-success small display-term">
                                        <i class="fas fa-smile"></i> ${term.optimistic} ${term.unit}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                grid.append(card);
            });
        }

        function initializeValues() {
            Object.keys(drakeTerms).forEach(termId => {
                currentValues[termId] = drakeTerms[termId].pessimistic;
            });
        }

        function updateTermCards() {
            generateTermCards();
        }

        function showIntroduction() {
            // Réinitialiser les cartes
            $('.term-card').removeClass('active-term');
            
            $('#term-details').hide();
            $('#welcome-screen').show();
        }

        function showTermDetail(termId, type='pessimistic') {
            // Réinitialiser les cartes
            $('.term-card').removeClass('active-term');
            $(`[onclick="showTermDetail('${termId}')"]`).addClass('active-term');
            
            $('#welcome-screen').hide();
            $('#term-details').show();
            
            const term = drakeTerms[termId];
            const detailHtml = `
                <div class="term-detail">
                    ${term.details}
                    
                    <div class="current-value-display current-value-${type}">
                        <h5><i class="fas fa-check-circle"></i> Valeur actuelle sélectionnée</h5>
                        <h3>${currentValues[termId]} ${term.unit}</h3>
                    </div>
                    
                    <div class="value-selector">
                        <h5><i class="fas fa-sliders-h"></i> Choisissez une valeur :</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card ${currentValues[termId] === term.pessimistic ? 'border-danger bg-light' : ''}" style="cursor: pointer;" onclick="setValue('${termId}', ${term.pessimistic}, 'pessimistic')">
                                    <div class="card-body text-center">
                                        <h6 class="text-danger"><i class="fas fa-frown"></i> Pessimiste</h6>
                                        <h4>${term.pessimistic} ${term.unit}</h4>
                                        <div class="btn-group mb-2" role="group">
                                            <button class="btn btn-outline-danger btn-sm" onclick="event.stopPropagation(); adjustValue('${termId}', 'pessimistic', -1)">
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="event.stopPropagation(); adjustValue('${termId}', 'pessimistic', 1)">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                        <br>
                                        <button class="btn ${currentValues[termId] === term.pessimistic ? 'btn-danger' : 'btn-outline-danger'}" type="button">
                                            ${currentValues[termId] === term.pessimistic ? 'Sélectionner' : 'Sélectionner'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card ${currentValues[termId] === term.optimistic ? 'border-success bg-light' : ''}" style="cursor: pointer;" onclick="setValue('${termId}', ${term.optimistic}, 'optimistic')">
                                    <div class="card-body text-center">
                                        <h6 class="text-success"><i class="fas fa-smile"></i> Optimiste</h6>
                                        <h4>${term.optimistic} ${term.unit}</h4>
                                        <div class="btn-group mb-2" role="group">
                                            <button class="btn btn-outline-success btn-sm" onclick="event.stopPropagation(); adjustValue('${termId}', 'optimistic', -1)">
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <button class="btn btn-outline-success btn-sm" onclick="event.stopPropagation(); adjustValue('${termId}', 'optimistic', 1)">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                        <br>
                                        <button class="btn ${currentValues[termId] === term.optimistic ? 'btn-success' : 'btn-outline-success'}" type="button">
                                            ${currentValues[termId] === term.optimistic ? 'Sélectionner' : 'Sélectionner'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            $('#term-details').html(detailHtml);
        }

        function adjustValue(termId, type, direction) {
            const term = drakeTerms[termId];
            
            // Définir les incréments selon le terme
            let increment;
            if (termId === 'R_star') {
                increment = 1; // étoiles/an
            } else if (termId === 'L') {
                increment = direction > 0 ? term[type] * 0.1 : term[type] * 0.1; // 10% d'ajustement
            } else if (term[type] >= 1) {
                increment = 0.1; // Pour les valeurs >= 1
            } else if (term[type] >= 0.1) {
                increment = 0.01; // Pour les valeurs décimales
            } else {
                increment = 0.001; // Pour les très petites valeurs
            }
            
            // Calculer la nouvelle valeur
            let newValue = term[type] + (direction * increment);
            
            // S'assurer que la valeur reste positive
            if (newValue <= 0) {
                newValue = increment;
            }
            
            // Arrondir pour éviter les problèmes de précision JavaScript
            if (increment >= 1) {
                newValue = Math.round(newValue);
            } else if (increment >= 0.1) {
                newValue = Math.round(newValue * 10) / 10;
            } else if (increment >= 0.01) {
                newValue = Math.round(newValue * 100) / 100;
            } else {
                newValue = Math.round(newValue * 1000) / 1000;
            }
            
            // Sauvegarder l'ancienne valeur pour comparaison
            const oldValue = term[type];
            
            // Mettre à jour la valeur dans l'objet
            drakeTerms[termId][type] = newValue;
            
            // Si cette valeur est actuellement sélectionnée, mettre à jour aussi currentValues
            if (currentValues[termId] === oldValue) {
                currentValues[termId] = newValue;
            }
            
            // Mettre à jour l'affichage des cartes avec les nouvelles valeurs
            updateTermCards();
            
            // Rafraîchir l'affichage du détail
            showTermDetail(termId, type);
        }

        function setValue(termId, value, type) {
            currentValues[termId] = value;
            updateTermCards(); // Mettre à jour l'affichage des cartes
            showTermDetail(termId, type); // Rafraîchir l'affichage du détail
            
            // Petit feedback visuel pour le résultat
            $('#result-value').html('Cliquez sur Calcul');
            $('.result-display').addClass('border border-warning');
            setTimeout(() => {
                $('.result-display').removeClass('border border-warning');
            }, 1000);
        }

        function calculateResult() {
            let result = 1;
            Object.keys(currentValues).forEach(termId => {
                result *= currentValues[termId];
            });
            
            // Formater le résultat selon sa taille
            let formattedResult;
            if (result >= 1000000) {
                formattedResult = (result / 1000000).toFixed(2) + 'M';
            } else if (result >= 1000) {
                formattedResult = (result / 1000).toFixed(2) + 'K';
            } else if (result >= 1) {
                formattedResult = result.toFixed(2);
            } else if (result >= 0.01) {
                formattedResult = result.toFixed(3);
            } else {
                formattedResult = result.toExponential(2);
            }
            
            $('#result-value').html(formattedResult);
            
            // Animation du résultat
            $('.result-display').addClass('animate__animated animate__pulse');
            setTimeout(() => {
                $('.result-display').removeClass('animate__animated animate__pulse');
            }, 1000);
        }
    </script>
</body>
</html>
